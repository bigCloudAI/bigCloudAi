<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta charset="UTF-8">
    <title>登录</title>
</head>
<body>
    <script type="text/javascript">
        document.domain = "qq.com";
        var domainPrefix = window.location.host;
        var cookie = {
            set : function(name, value, domain, path, hour) {
                if (hour) {
                    var today = new Date();
                    var expire = new Date();
                    expire.setTime(today.getTime() + 3600000 * hour);
                }
                window.document.cookie = name + "=" + value + "; " + (hour ? ("expires=" + expire.toGMTString() + "; ") : "") + (path ? ("path=" + path + "; ") : "path=/; ") + (domain ? ("domain=" + domain + ";") : ("domain=" + domainPrefix + ";"));
                return true;
            },
            get : function(name) {
                var r = new RegExp("(?:^|;+|\\s+)" + name + "=([^;]*)");
                var m = window.document.cookie.match(r);
                return (!m ? "" : m[1]);
            },
            remove : function(name, domain, path) {
                window.document.cookie = name + "=; expires=Mon, 26 Jul 1997 05:00:00 GMT; " + (path ? ("path=" + path + "; ") : "path=/; ") + (domain ? ("domain=" + domain + ";") : ("domain=" + domainPrefix + ";"));
            }
        };

        var getUrlParam =  function ( name ,href ,noDecode ) {
            var re = new RegExp( '(?:\\?|#|&)' + name + '=([^&]*)(?:$|&|#)',  'i' ), m = re.exec( href );
            var ret = m ? m[1] : '' ;
            return !noDecode ? decodeURIComponent( ret ) : ret;
        };

        var proxy_iframe = document.createElement("iframe");
        
        proxy_iframe.src = "//web2.qq.com/web2_cookie_proxy.html";

        var p_skey = cookie.get('p_skey');
        var p_uin = cookie.get('p_uin');

        proxy_iframe.onload = function(){
            
            var cookieArr = proxy_iframe.contentWindow.getCookie();

            /*var p_skey = cookieArr[0];
            var p_uin = cookieArr[1];
            cookie.set("p_skey",p_skey);
            cookie.set("p_uin",p_uin);*/
            // console.log(47, window.parent.mq.main.onPTLoginSuccess, getUrlParam("webqq_type",location.href));
            if(window.parent.mq.main.onPTLoginSuccess) {
                window.parent.mq.main.onPTLoginSuccess(getUrlParam("webqq_type",location.href));
            } else {
                window.parent.location.href="https://w.qq.com/index.html?webqq_type=" + getUrlParam("webqq_type", location.href);
            }
            
        }

        document.body.appendChild(proxy_iframe);
        proxy_iframe.style.display = "none";

    </script><iframe src="proxy_data/web2_cookie_proxy.htm" style="display: none;"></iframe>



</body></html>